<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .container { max-width: 1000px; margin: auto; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 12px; text-align: left; }
        th { background-color: #f8f9fa; }

        .btn { padding: 8px 12px; text-decoration: none; border-radius: 4px; font-size: 14px; }
        .btn-add { background-color: #28a745; color: white; float: right; }
        .btn-edit { background-color: #ffc107; color: black; margin-right: 5px; }
        .btn-delete { background-color: #dc3545; color: white; }

        /* í˜ì´ì§• */
        .pagination { margin-top: 20px; text-align: center; }
        .pagination a,
        .pagination span {
            margin: 0 4px;
            text-decoration: none;
            font-size: 14px;
        }
        .pagination .active {
            font-weight: bold;
            color: blue;
        }
        .pagination .disabled {
            color: #aaa;
        }
        .page-input {
            margin-left: 10px;
            font-size: 13px;
        }
        .page-input input {
            width: 40px;
            text-align: center;
            font-size: 13px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ‘¥ íšŒì› ê´€ë¦¬ ëª©ë¡ (CRUD í™•ì¸)</h2>

    <a th:href="@{/members/new}" class="btn btn-add">+ ì‹ ê·œ íšŒì› ë“±ë¡</a>

    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>ì´ë¦„</th>
            <th>ë‚˜ì´</th>
            <th>ì£¼ì†Œ</th>
            <th>ì „í™”ë²ˆí˜¸</th>
            <th>ê´€ë¦¬</th>
        </tr>
        </thead>
        <tbody>
        <!-- Page<Member> ì—ì„œ ë‚´ìš© êº¼ë‚´ê¸° -->
        <tr th:each="member : ${memberPage.content}">
            <td th:text="${member.memberId}">1</td>
            <td th:text="${member.name}">í™ê¸¸ë™</td>
            <td th:text="${member.age}">25</td>
            <td th:text="${member.address}">ì„œìš¸ì‹œ ê°•ë‚¨êµ¬</td>
            <td th:text="${member.phone}">010-1234-5678</td>
            <td>
                <a th:href="@{/members/edit/{id}(id=${member.memberId})}" class="btn btn-edit">ìˆ˜ì •</a>
                <a th:href="@{/members/delete/{id}(id=${member.memberId})}"
                   class="btn btn-delete"
                   onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
            </td>
        </tr>
        <!-- ë¹ˆ ëª©ë¡ ì²˜ë¦¬ -->
        <tr th:if="${#lists.isEmpty(memberPage.content)}">
            <td colspan="6" style="text-align: center;">ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        </tbody>
    </table>
</div>

<!-- í˜ì´ì§• ì˜ì—­ -->
<div class="pagination">

    <!-- ì´ì „ -->
    <span th:if="${memberPage.first}" class="disabled">[ì´ì „]</span>
    <a th:if="${!memberPage.first}"
       th:href="@{|/members/list?page=${memberPage.number - 1}&size=${memberPage.size}|}">
        [ì´ì „]
    </a>

    <!-- ë²ˆí˜¸ë“¤: 0 ~ totalPages-1 -->
    <span th:each="idx : ${#numbers.sequence(0, memberPage.totalPages - 1)}">
        <a th:href="@{|/members/list?page=${idx}&size=${memberPage.size}|}"
           th:text="${idx + 1}"
           th:classappend="${idx} == ${memberPage.number} ? 'active'">
        </a>
    </span>

    <!-- ë‹¤ìŒ -->
    <span th:if="${memberPage.last}" class="disabled">[ë‹¤ìŒ]</span>
    <a th:if="${!memberPage.last}"
       th:href="@{|/members/list?page=${memberPage.number + 1}&size=${memberPage.size}|}">
        [ë‹¤ìŒ]
    </a>

    <!-- ì™¼ìª½: ìˆ˜ì • ê°€ëŠ¥, ì˜¤ë¥¸ìª½: ì½ê¸° ì „ìš© -->
    <span class="page-input">
        <input type="number"
               min="1"
               th:attr="max=${memberPage.totalPages}"
               th:value="${memberPage.number + 1}"
               onchange="goPage(this)">
        /
        <span th:text="${memberPage.totalPages}">0</span> í˜ì´ì§€
    </span>
</div>

<script th:inline="javascript">
    function goPage(input) {
        var value = parseInt(input.value, 10);
        if (isNaN(value)) return;

        if (value < 1) value = 1;
        var max = /*[[${memberPage.totalPages}]]*/ 1;
        if (value > max) value = max;

        var size = /*[[${memberPage.size}]]*/ 5;
        window.location.href = '/members/list?page=' + (value - 1) + '&size=' + size;
    }
</script>

</body>
</html>
